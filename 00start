#!/system/bin/sh
#
# W.I.P. script, made by USBhost.
# for this script to work you'll need busbox,
# if not supplied. made for the Nexus 9.
#

# the 'FI.d' folder
# is meant for values that dont stay at boot
# because the system overwrites them just after bootup.
# so to fix this, is to apply a wait time before it executes.
# wake lock is needed because if the system suspends
# FI.d/init.d scripts may not execute.
	echo tmp_lock > /sys/power/wake_lock && log -p i -t FI.d " FI.d v19 start "
# mount cache
	/BB/busybox mount -t ext4 -o rw,barrier=0,noload,errors=continue /dev/block/platform/sdhci-tegra.3/by-name/CAC /cache || /BB/busybox mount -t auto -o rw /dev/block/platform/sdhci-tegra.3/by-name/CAC /cache || log -p i -t FI.d " cache; mount faild, is swap? "
# start init.d
	/BB/busybox run-parts /system/etc/init.d
# set wait time
	log -p i -t FI.d " 1min wait to continue" && sleep 60
	log -p i -t FI.d " end of start"
